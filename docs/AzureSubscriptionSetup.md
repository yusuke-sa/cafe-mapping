# Azure サブスクリプション作成と支払い情報登録手順

## 前提条件と準備
- Microsoft アカウントを用意し、Pay-As-You-Go など課金可能な Azure サブスクリプションの取得を想定する。学生向けやスタートアップ向けクレジットがある場合は活用を検討する。
- クレジットカードなど課金情報を事前に準備し、サブスクリプション作成直後に登録する。登録後は Azure Cost Management でコストアラートを設定して予算管理を徹底する。

## Azure サブスクリプション作成手順
1. ブラウザーで <https://portal.azure.com/> にアクセスし、Microsoft アカウントでサインインする。
2. 初めて Azure を利用する場合は「サブスクリプションの作成」ウィザードが自動で開くので、「今すぐ開始」を選択する。
3. アカウント種別（個人／法人）を選択し、氏名・住所・電話番号などの本人確認情報を入力する。
4. 連絡先の電話番号に送信される認証コードで本人確認を完了させる。
5. 「プランの選択」で Pay-As-You-Go を選択し、利用規約とプライバシーステートメントに同意して進む。
6. 申込内容を確認し、「サインアップ」を実行するとサブスクリプションが有効化される。

## 支払い情報の登録
1. Azure ポータル左上のメニューから **「コストの管理と請求」** を開く。
2. 「請求プロファイル」または「支払い方法」画面で「支払い方法の追加」をクリックする。
3. クレジットカード番号、有効期限、セキュリティコード、請求先住所を入力する。
4. 入力内容を確認し「保存」。必要に応じて 2 段階認証やカード会社の 3D セキュア認証を完了させる。
5. 支払い方法が登録されると、ポータル上でステータスが「アクティブ」に変わる。複数カードを登録する場合は優先順位を設定する。

## 開通後の初期設定
### コスト管理
- 「コストの管理と請求」→「コストアラート」で、月間予算や通知閾値（例: 50%、75%、90%）を設定する。
- 必要に応じてコスト分析ダッシュボードを固定し、使用量を可視化する。

### リソース管理
- サブスクリプション配下にリソースグループを作成し、命名規則（例: `rg-<app>-prod`）を決める。
- Static Web Apps、Functions、Cosmos DB など本プロジェクトで想定する主要サービスを整理し、必要なリージョンの利用可否を確認する。

### セキュリティ・ガバナンス
- Azure ポリシーやロールベースアクセス制御 (RBAC) を検討し、開発者と管理者の権限を分離する。
- Azure Monitor やアクティビティログを有効にして操作履歴を追跡できるようにする。

## 支払い情報更新・管理のポイント
- カードの有効期限切れを防ぐため、更新月の数か月前に代替カードを登録しておく。
- 法人の場合は請求書（Invoice）払いへの切り替えも検討し、与信審査に備えて会社情報を整備する。
- 支払い方法の変更は「支払い方法」画面から既存カードを選択して「編集」または「削除」を行う。

## よくあるトラブルと対処
| 課題 | 対処 |
| --- | --- |
| クレジットカード認証に失敗する | カード会社の海外利用設定を確認し、3D セキュアに対応したカードを利用する。 |
| 本人確認が完了しない | 住所や電話番号を公的書類と一致させ、固定電話ではなく SMS 受信可能な携帯番号を入力する。 |
| サブスクリプションの課金が想定より高い | コスト分析で高額なサービスを特定し、スケーリング設定やリソース停止を検討する。コストアラートの閾値を見直す。 |
| 請求書が社内承認に回せない | Azure ポータルから PDF/CSV 形式でダウンロードし、Power Automate 等でワークフロー化する。 |

## 参考情報
- Azure サブスクリプションは 1 つの契約で複数のサービス（Static Web Apps、Functions、Cosmos DB など）をまとめて管理できるため、初期段階では単一サブスクリプションで構成を整理し、必要に応じて分割する。
- 利用申請が必要な Azure OpenAI などのサービスは、サブスクリプション開設後すぐに申請フローを進めるとリードタイムを短縮できる。
