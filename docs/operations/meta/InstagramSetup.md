# Instagramビジネスアカウント & Meta開発者アカウント準備手順

## 1. 前提条件
- 個人の Instagram アカウントを保有していること。
- Facebook アカウント（Metaアカウント）があり、本人確認が完了していること。
- 今回のアプリ用途（店舗情報分析・可視化）について、Meta のプラットフォームポリシーを遵守する意思があること。
- 将来的に Instagram Graph API を利用するため、Meta for Developers に登録しアプリを作成する。

## 2. Instagram アカウントをビジネス/クリエイターに切り替え
1. Instagram モバイルアプリで対象アカウントにログイン。
2. 右上メニュー → **「設定とアクティビティ」** → **「アカウントタイプとツール」** を選択。
3. **「プロアカウントに切り替える」** を押し、ビジネスまたはクリエイターを選択。
4. カテゴリ（例: 「ブロガー」「製品/サービス」など）と連絡先情報（メール、電話、住所）を入力。
5. 既存の Facebook ページがあれば紐付け、無い場合は後で作成可能。

## 3. Facebook ページの作成と紐付け
1. ブラウザで Facebook にログインし、左メニューの **「ページ」** → **「新しいページを作成」**。
2. ページ名・カテゴリ・紹介文を入力し、必要に応じてプロフィール画像やカバー画像を設定。
3. ページ設定 → **「Instagram」** セクションで **「アカウントの接続」** を選択し、Instagram ビジネスアカウントとリンク。
4. 接続後、Instagram 側の「プロアカウント」設定に Facebook ページ名が表示されていることを確認。

## 4. Meta for Developers への登録
1. <https://developers.facebook.com/> にアクセスし、Facebookアカウントでログイン。
2. 右上の **「Get Started」** をクリックし、開発者規約に同意。
3. 電話番号または SMS による本人確認を行い、開発者アカウントを有効化。
4. ダッシュボードに遷移したら **「My Apps」→「Create App」** を選択。
5. アプリタイプは「Business」または「None」を選択（Graph API 利用が中心の場合は Business 推奨）。
6. アプリ表示名（例: `Cafe Mapping`）・連絡先メールアドレスを入力し、アプリを作成。

## 5. アプリ設定と Instagram Graph API の有効化
1. 作成したアプリのダッシュボードで **「Use Cases」→「Add products to your app」** を開く。
2. **「Instagram Graph API」** の「Set Up」をクリック。
3. 「Instagram 基本表示」も併用する場合は同様にセットアップ。
4. App Mode が **「開発」** になっていることを確認。公開前に「ライブ」へ切り替えるには App Review が必要。

## 6. 必要権限・App Review の準備
- 取得するデータに応じて権限を申請する。例:
  - `instagram_basic`: 基本プロフィールとメディア情報
  - `pages_show_list`: ビジネスが管理する Facebook ページの一覧
  - `instagram_manage_insights`: 投稿のインサイトを取得する場合
- App Review の際は、以下の資料が求められる可能性がある:
  - アプリの利用目的を説明するドキュメント
  - アプリの挙動を撮影したデモ動画（権限利用箇所の説明）
  - テストユーザーまたはテスターアカウントのログイン情報
- 権限を追加したら、App Dashboard の **「App Review」→「Permissions and Features」** から申請。

## 7. アクセストークンとテストユーザー
1. アプリダッシュボードの **「Roles」→「Testers」** で Facebook / Instagram テスターを追加。
2. テスターに招待通知が送信されるので承認してもらう。
3. **「Tools」→「Graph API Explorer」** を使用して短期アクセストークンを取得し、API 呼び出しをテスト。
4. 長期アクセストークンが必要な場合は、Facebook ページアクセストークン経由で Instagram ビジネスアカウントのトークンを発行し、定期的に更新。

## 8. セキュリティと運用上の注意
- アクセストークンは環境変数やシークレットマネージャで管理し、Gitリポジトリに含めない。
- 利用規約とデータ保持ポリシーを遵守し、ユーザーデータの保存・再利用ルール (Facebook Platform Policy) を確認。
- 不要になったテスター・アプリ権限は速やかに削除し、事故を防止。
- App Review の審査期間は数日〜数週間かかることがあるため、必要権限は早めに申請。

## 9. 次のアクション
1. Instagram アカウントのプロ化と Facebook ページ作成・リンクを完了させる。
2. Meta for Developers でアプリを作成し、Instagram Graph API を設定。
3. 必要権限の App Review 書類やデモ動画を準備し、審査を提出。
4. テストアクセストークンで API の疎通確認を実施。
